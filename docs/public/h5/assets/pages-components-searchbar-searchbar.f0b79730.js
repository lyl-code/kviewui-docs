var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,u=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a;import{D as i,E as c,r as s,M as r,G as d,d as p,f,o as k,c as m,w as h,a as g,b as y,I as b,q as V,H as w,m as _,l as x,i as S,aa as C,a4 as v,_ as B,$ as I}from"./index.23888770.js";import{_ as $}from"./kui-text.130ddde7.js";import{c as z,r as L,_ as A}from"./kui-page.40f10ef7.js";import{_ as j}from"./kui-switch.eca5ec4f.js";import{_ as U}from"./kui-cell-group.81ac2330.js";import{_ as O}from"./kui-icons.7ba34cc0.js";import{_ as P}from"./plugin-vue_export-helper.21dcd24c.js";import{_ as N}from"./kui-space.43763e84.js";import{_ as M}from"./kui-toast.fb6a3222.js";import"./kui-animation.9b475c9e.js";var R={modelValue:{type:[String,Number],default:""},label:{type:String,default:""},shape:{type:String,default:"round"},maxLength:{type:[String,Number],default:9999},background:{type:String,default:"grey"},backgroundLevel:{type:[String,Number],default:0},placeholder:{type:String,default:"请输入搜索内容"},clearable:{type:Boolean,default:!0},inputBackground:{type:String,default:"grey"},inputBackgroundLevel:{type:[Number,String],default:1},confirmType:{type:String,default:"done"},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},inputAlign:{type:String,default:"left"},mode:{type:String,default:()=>{var e,t;return null!=(t=null==(e=i(z,void 0))?void 0:e.mode)?t:"light"}},showAction:{type:Boolean,default:!1},showLefticon:{type:Boolean,default:!0},showRighticon:{type:Boolean,default:!1}};const F=e=>e.indexOf("linear-gradient")>-1,H="kui-searchbar";var D=P(c({name:H,props:R,emits:["update:modelValue","change","click-input","search","focus","blur","clear","click-action","click-lefticon","click-righticon"],setup(e,{emit:t}){const{proxy:l}=p(),a=l.$theme,o=s({mode:e.mode}),n=e=>a.colors[o.mode][e]?a.colors[o.mode][e]:uni.kviewUIColor.generate(e,{list:!0,dark:"dark"===o.mode}),u=r((()=>{const t=s({});if(t.lineHeight=1,t.padding="15rpx 30rpx",F(e.background))t.backgroundImage=e.background;else{const l=n(e.background);t.background=l[e.backgroundLevel]}return t})),i=r((()=>`\n\t\t\t\t\tfontSize: ${a.size.fonts.base}${a.size.fontUnit};\n\t\t\t\t`)),c=r((()=>{const t=s({});if(F(e.inputBackground))t.backgroundImage=e.inputBackground;else{const l=n(e.inputBackground);t.background=l[e.inputBackgroundLevel]}return t.display="flex",t.flex="1 1 auto",t.padding="15rpx 30rpx",t.borderRadius="round"===e.shape?`${a.size.radiusSize.base}rpx`:`${a.size.radiusSize.max}rpx`,t})),f=r((()=>{const t=s({});return t.height="100%",t.display="flex",t.flex="1 1 auto",t.fontSize=`${a.size.fonts.base}rpx`,t.textAlign=e.inputAlign,t.color=`${a.colors[o.mode].grey[9]}`,t})),k=t=>(e.maxLength&&t.length>Number(e.maxLength)&&(t=t.slice(0,Number(e.maxLength))),t);return d("changeMode",(e=>{o.mode=e})),{name:H,theme:a,rootStyle:u,inputBoxStyle:c,inputStyle:f,inputPlaceHolderStyle:i,onInput:e=>{let l=k(e.detail.value);t("update:modelValue",l,e),t("change",l,e)},onConfirm:()=>{t("search",e.modelValue)},onClickInput:e=>{t("click-input",e)},onFocus:e=>{t("focus",e)},onBlur:e=>{let l=k(e.detail.value);t("blur",l,e)},onClearable:e=>{t("update:modelValue","",e),t("change","",e),t("clear","")},onClickAction:e=>{t("update:modelValue","",e),t("click-action",e)},onClickLefticon:e=>{t("click-lefticon",e)},onClickRighticon:e=>{t("click-righticon",e)}}}}),[["render",function(e,t,l,a,o,n){const u=L(f("kui-text"),$),i=S,c=L(f("kui-icons"),O),s=C;return k(),m(i,{class:x(["kui-h-full kui-flex kui-items-center",e.name]),style:_(e.rootStyle)},{default:h((()=>[e.label?(k(),m(i,{key:0,class:"kui-mr-2"},{default:h((()=>[g(u,{size:`${e.theme.size.fonts.lg}${e.theme.size.fontUnit}`},{default:h((()=>[y(b(e.label),1)])),_:1},8,["size"])])),_:1})):V("",!0),g(i,{class:"kui-flex kui-items-center",style:_(e.inputBoxStyle)},{default:h((()=>{var t;return[e.$slots.lefticon||e.showLefticon?(k(),m(i,{key:0,class:"kui-mr-2",onClick:e.onClickLefticon},{default:h((()=>[w(e.$slots,"lefticon",{},(()=>[g(c,{weight:100,color:"grey",size:34,type:"search"})]))])),_:3},8,["onClick"])):V("",!0),g(i,{class:"kui-w-full",onClick:e.onClickInput},{default:h((()=>[g(s,{type:"text",placeholder:e.placeholder,style:_(e.inputStyle),"placeholder-style":e.inputPlaceHolderStyle,"confirm-type":e.confirmType,focus:e.autofocus,disabled:e.disabled,value:e.modelValue,onInput:e.onInput,onBlur:e.onBlur,onFocus:e.onFocus,onConfirm:e.onConfirm},null,8,["placeholder","style","placeholder-style","confirm-type","focus","disabled","value","onInput","onBlur","onFocus","onConfirm"])])),_:1},8,["onClick"]),(null==(t=e.modelValue)?void 0:t.length)>0&&e.clearable?(k(),m(i,{key:1,class:"kui-ml-2",onClick:e.onClearable},{default:h((()=>[w(e.$slots,"clearicon",{},(()=>[g(c,{weight:100,color:"grey",size:34,type:"cancel"})]))])),_:3},8,["onClick"])):V("",!0),e.$slots.righticon||e.showRighticon?(k(),m(i,{key:2,class:"kui-ml-2",onClick:e.onClickRighticon},{default:h((()=>[w(e.$slots,"righticon",{},(()=>[g(c,{weight:100,color:"grey",size:40,type:"mic1"})]))])),_:3},8,["onClick"])):V("",!0)]})),_:3},8,["style"]),e.showAction?(k(),m(i,{key:1,class:"kui-ml-2",onClick:e.onClickAction},{default:h((()=>[w(e.$slots,"action",{},(()=>[g(u,{size:`${e.theme.size.fonts.lg}${e.theme.size.fontUnit}`},{default:h((()=>[y("取消")])),_:1},8,["size"])]))])),_:3},8,["onClick"])):V("",!0)])),_:3},8,["class","style"])}]]);var E=P({setup(){const{proxy:e}=p(),i=e.$theme,c=v(""),r={state:s({show:!1,content:""})},d={state:s({value:""}),methods:{onClickInput(e){console.log(e)}}},f={state:s({value:""}),methods:{onSearch(e){r.state.content=`搜索内容：${e}`,r.state.show=!0},onClickAction(e){r.state.content="取消",r.state.show=!0},onClickLefticon(e){r.state.content="左边图标点击事件触发",r.state.show=!0}}},k=v(""),m=v(""),h=v(""),g=v(""),y=v(""),b=v(!1);let V=v("light");return w=((e,t)=>{for(var l in t||(t={}))o.call(t,l)&&u(e,l,t[l]);if(a)for(var l of a(t))n.call(t,l)&&u(e,l,t[l]);return e})({theme:i},B({baseValue:c,hiddenLefticonValue:k,inputAlignValue:m,disabledValue:h,customBackgroundValue:g,showAllIconValue:y,checked:b,mode:V})),t(w,l({clickState:d,eventState:f,toastState:r,clickInput:e=>{r.state.content="搜索框点击事件触发",r.state.show=!0},changeMode:()=>{V=b.value?"dark":"light",I("changeMode",V)}}));var w}},[["render",function(e,t,l,a,o,n){const u=L(f("kui-text"),$),i=L(f("kui-switch"),j),c=S,s=L(f("kui-cell-group"),U),r=L(f("kui-searchbar"),D),d=L(f("kui-space"),N),p=L(f("kui-page"),A),b=L(f("kui-toast"),M);return k(),m(c,{class:"kui-w-full"},{default:h((()=>[g(p,{paddingX:0,"custom-header":!1},{body:h((()=>[g(c,{class:"kui-w-full"},{default:h((()=>[g(d,{gap:[40,0],direction:"column"},{default:h((()=>[g(c,{class:"kui-mt-6 kui-h-full kui-flex kui-items-center kui-px-3"},{default:h((()=>[g(u,null,{default:h((()=>[y("暗黑模式：")])),_:1}),g(i,{modelValue:e.checked,"onUpdate:modelValue":t[0]||(t[0]=t=>e.checked=t),onChange:a.changeMode},null,8,["modelValue","onChange"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"基本用法"})])),_:1}),g(r,{modelValue:e.baseValue,"onUpdate:modelValue":t[1]||(t[1]=t=>e.baseValue=t)},null,8,["modelValue"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"事件监听",desc:"演示搜索事件/右边动作按钮点击事件/左边图标点击事件"})])),_:1}),g(r,{modelValue:a.eventState.state.value,"onUpdate:modelValue":t[2]||(t[2]=e=>a.eventState.state.value=e),"show-action":"",onSearch:a.eventState.methods.onSearch,onClickLefticon:a.eventState.methods.onClickLefticon,onClickAction:a.eventState.methods.onClickAction},null,8,["modelValue","onSearch","onClickLefticon","onClickAction"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"隐藏搜索图标",desc:"可通过插槽自定义图标"})])),_:1}),g(r,{modelValue:e.hiddenLefticonValue,"onUpdate:modelValue":t[3]||(t[3]=t=>e.hiddenLefticonValue=t),"show-lefticon":!1},null,8,["modelValue"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"搜索框文本对齐",desc:"input-align: left/center/right"})])),_:1}),g(r,{modelValue:e.inputAlignValue,"onUpdate:modelValue":t[4]||(t[4]=t=>e.inputAlignValue=t),"input-align":"center"},null,8,["modelValue"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"禁用搜索框",desc:"可以触发点击事件"})])),_:1}),g(r,{modelValue:e.disabledValue,"onUpdate:modelValue":t[5]||(t[5]=t=>e.disabledValue=t),disabled:"",onClickInput:a.clickInput},null,8,["modelValue","onClickInput"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"自定义样式",desc:"支持自定义搜索框外部背景色和搜索框背景色"})])),_:1}),g(r,{modelValue:e.customBackgroundValue,"onUpdate:modelValue":t[6]||(t[6]=t=>e.customBackgroundValue=t),background:`linear-gradient(to right, ${a.theme.colors.light.primary[5]}, ${a.theme.colors.light.primary[3]})`,"input-background":"grey"},null,8,["modelValue","background"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"显示全部图标"})])),_:1}),g(r,{modelValue:e.showAllIconValue,"onUpdate:modelValue":t[7]||(t[7]=t=>e.showAllIconValue=t),label:"地址","show-lefticon":"","show-righticon":"","show-action":""},null,8,["modelValue"])])),_:1}),g(c,{class:"kui-w-full"},{default:h((()=>[g(c,{class:"kui-px-3"},{default:h((()=>[g(s,{title:"搜索框点击事件监听"})])),_:1}),g(r,{modelValue:a.clickState.state.value,"onUpdate:modelValue":t[8]||(t[8]=e=>a.clickState.state.value=e),disabled:"",onClickInput:a.clickInput},null,8,["modelValue","onClickInput"])])),_:1})])),_:1}),g(c,{class:"kui-px-3 kui-w-full kui-box-border"},{default:h((()=>[g(s,{title:""},{default:h((()=>[g(u,{color:"hsl(213,10.00%, 56.86%)"},{default:h((()=>[y("示例数据为组件支持的部分数据，详细支持数据请参考组件源码和组件文档")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),g(b,{show:a.toastState.state.show,"onUpdate:show":t[9]||(t[9]=e=>a.toastState.state.show=e),content:a.toastState.state.content},null,8,["show","content"])])),_:1})}]]);export{E as default};
